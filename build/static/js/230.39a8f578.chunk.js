"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[230],{230:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var n=a(5043),s=a(6144),c=a(70),o=a(4784),l=a(8554),i=a(6900),r=(a(2950),a(579));const d=()=>{const{user:e}=(0,n.useContext)(o.A),[t,a]=(0,n.useState)(),[d,h]=(0,n.useState)();(0,n.useEffect)((()=>{e&&l.T.getBrandNames(e.id).then((e=>{let t=[...new Set(e)];a(t)}))}),[e]),(0,n.useEffect)((()=>{t&&t.length&&h(t[0])}),[t]);const[p,m]=(0,n.useState)(null),[u,f]=(0,n.useState)({type:null,value:null});(0,n.useEffect)((()=>{f({...u,type:null})}),[]);return console.log(u),(0,r.jsxs)("div",{className:"dashboard-page",children:[(0,r.jsx)(s.A,{}),(0,r.jsxs)("div",{className:"dashboard-content pb-3",children:[(0,r.jsx)(c.A,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"}),(0,r.jsx)("div",{className:"container dash-container",children:(0,r.jsxs)("div",{className:"mt-3 wide-plate",children:[(0,r.jsx)("h5",{className:"mb-1 fw-bold",style:{fontSize:"2.5vh"},children:"\u0412\u043d\u0435\u0441\u0442\u0438 \u0441\u0435\u0431\u0435\u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u043e\u0432"}),(0,r.jsxs)("div",{className:"filter-item w-50 col me-2 mb-3",children:[(0,r.jsx)("label",{style:{fontSize:"2vh",margin:"1vh 0"},htmlFor:"store",children:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d:"}),(0,r.jsx)("select",{style:{fontSize:"2vh"},className:"form-control w-75",id:"store",defaultValue:t?t[0]:null,onChange:e=>h(e.target.value),children:t&&t.map(((e,t)=>(0,r.jsx)("option",{value:e,children:e},t)))})]}),(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,r.jsxs)("div",{className:"d-flex align-items-center w-50",children:[(0,r.jsx)("input",{type:"file",id:"excelFile",name:"excelFile",className:"form-control ",onChange:e=>{m(e.target.files[0])},style:{height:"5vh",fontSize:"2.25vh"}}),(0,r.jsx)("button",{className:"prime-btn",style:{padding:"1.25vh 2vh",maxWidth:"12vw",marginLeft:"1rem"},onClick:async()=>{if(!p)return void alert("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b");const t=new FormData;t.append("excelFile",p);try{if(!(await fetch("".concat(i.k,"/api/data-collection/set-costs/").concat(e.id,"?brandName=").concat(d),{method:"POST",body:t})).ok)throw new Error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u0430\u0439\u043b\u0430");alert("\u0424\u0430\u0439\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d")}catch(a){console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",a),alert("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u0430\u0439\u043b\u0430")}},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:"secondary-btn",style:{padding:"1.25vh 2vh"},onClick:()=>{e&&d&&fetch("".concat(i.k,"/api/data-collection/costs/").concat(e.id,"?brandName=").concat(d)).then((e=>e.blob())).then((e=>{const t=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.href=t,a.setAttribute("download","\u0421\u0435\u0431\u0435\u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c.xlsx"),document.body.appendChild(a),a.click(),a.parentNode.removeChild(a)}))},children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d"})})]}),(0,r.jsx)("br",{}),(0,r.jsx)("h5",{className:"mb-1 fw-bold",style:{fontSize:"2.5vh"},children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u043d\u0430\u043b\u043e\u0433\u043e\u043e\u0431\u043b\u043e\u0436\u0435\u043d\u0438\u044f"}),(0,r.jsx)("div",{className:"w-75",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"",className:"mt-2 mb-0 fw-bold",children:"\u041f\u0440\u043e\u0446\u0435\u043d\u0442\u043d\u0430\u044f \u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u043e \u043d\u0430\u043b\u043e\u0433\u0443"}),(0,r.jsx)("input",{type:"number",className:"form-control mt-2 w-50",onChange:e=>f({...u,value:Number(e.target.value)})})]})}),(0,r.jsx)("button",{className:"prime-btn",style:{padding:"1.25vh 2vh",maxWidth:"12vw"},onClick:t=>((t,a)=>{null===a.value?(t.preventDefautl(),alert("\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043d\u0430\u043b\u043e\u0433\u043e\u0432\u043e\u0439 \u0441\u0442\u0430\u0432\u043a\u0438")):l.T.updateTax(e.id,d,u)})(t,u),children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})]})]})}},8554:(e,t,a)=>{a.d(t,{T:()=>s});var n=a(6900);const s={register:async e=>{try{const t=await fetch("".concat(n.k,"/api/user/signup"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)});return await t.json()}catch(t){alert(t)}},updateToken:async(e,t,a)=>{const s=await fetch("".concat(n.k,"/api/shop/"),{method:"POST",headers:{"content-type":"application/json",authorization:"JWT "+a},body:JSON.stringify({brand_name:e,token:t,is_active:!0})});return await s.json()},getDashBoard:async(e,t,a)=>{const n=await fetch("https://radar-analytica.ru/api/dashboard/?period=".concat(t,"&shop=").concat(a),{method:"GET",headers:{"content-type":"application/json",authorization:"JWT "+e}});return await n.json()},getAllShops:async e=>{const t=await fetch("https://radar-analytica.ru/api/shop/all",{method:"GET",headers:{"content-type":"application/json",authorization:"JWT "+e}});return await t.json()},getGeographyData:async(e,t,a)=>{const n=await fetch("https://radar-analytica.ru/api/geo/?period=".concat(t,"&shop=").concat(a),{method:"GET",headers:{"content-type":"application/json",authorization:"JWT "+e}});return await n.json()}}},2950:()=>{}}]);
//# sourceMappingURL=230.39a8f578.chunk.js.map